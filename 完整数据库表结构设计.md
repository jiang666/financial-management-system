# è´¢åŠ¡ç®¡ç†ç³»ç»Ÿå®Œæ•´æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

## ğŸ“Š è®¾è®¡æ¦‚è¿°

åŸºäºå‰ç«¯é¡µé¢æ·±åº¦åˆ†æå’Œç°æœ‰æ•°æ®åº“è®¾è®¡ï¼Œåˆ›å»ºå®Œæ•´çš„è´¢åŠ¡ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è¡¨ç»“æ„ã€‚

### æ ¸å¿ƒè®¾è®¡åŸåˆ™
- **ä¸šåŠ¡å®Œæ•´æ€§**: è¦†ç›–æ‰€æœ‰å‰ç«¯é¡µé¢åŠŸèƒ½éœ€æ±‚
- **æ•°æ®ä¸€è‡´æ€§**: å¼ºä¸€è‡´æ€§çº¦æŸä¿è¯è´¢åŠ¡æ•°æ®å‡†ç¡®æ€§  
- **æ‰©å±•æ€§**: æ”¯æŒä¸šåŠ¡åŠŸèƒ½æ‰©å±•å’Œæ•°æ®é‡å¢é•¿
- **å®¡è®¡æ€§**: å®Œæ•´çš„å®¡è®¡è·Ÿè¸ªå’Œæ•°æ®å˜æ›´è®°å½•
- **æ€§èƒ½ä¼˜åŒ–**: åˆç†ç´¢å¼•è®¾è®¡æ”¯æŒé«˜æ•ˆæŸ¥è¯¢

---

## ğŸ—‚ï¸ æ¨¡å—åŒ–è¡¨ç»“æ„è®¾è®¡

### 1. åŸºç¡€è®¾ç½®æ¨¡å—

#### 1.1 ç”¨æˆ·æƒé™ç®¡ç†
```sql
-- å·²æœ‰è¡¨ç»“æ„ (01_user_permission_tables.sql)
-- users, roles, permissions, user_roles, role_permissions
```

#### 1.2 ç»„ç»‡æ¶æ„ç®¡ç†
```sql
-- éƒ¨é—¨è¡¨
CREATE TABLE departments (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    dept_code VARCHAR(20) NOT NULL UNIQUE COMMENT 'éƒ¨é—¨ç¼–ç ',
    dept_name VARCHAR(100) NOT NULL COMMENT 'éƒ¨é—¨åç§°',
    parent_id VARCHAR(36) COMMENT 'çˆ¶çº§éƒ¨é—¨ID',
    dept_type ENUM('å…¬å¸', 'éƒ¨é—¨', 'å°ç»„') DEFAULT 'éƒ¨é—¨' COMMENT 'éƒ¨é—¨ç±»å‹',
    manager_id VARCHAR(36) COMMENT 'è´Ÿè´£äººç”¨æˆ·ID',
    phone VARCHAR(20) COMMENT 'éƒ¨é—¨ç”µè¯',
    level INT NOT NULL DEFAULT 1 COMMENT 'éƒ¨é—¨å±‚çº§',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨' COMMENT 'çŠ¶æ€',
    description TEXT COMMENT 'éƒ¨é—¨æè¿°',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_dept_code (dept_code),
    INDEX idx_parent_id (parent_id),
    INDEX idx_manager_id (manager_id),
    INDEX idx_status (status),
    FOREIGN KEY (parent_id) REFERENCES departments(id),
    FOREIGN KEY (manager_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='éƒ¨é—¨è¡¨';

-- å²—ä½è¡¨
CREATE TABLE positions (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    dept_id VARCHAR(36) NOT NULL COMMENT 'éƒ¨é—¨ID',
    position_name VARCHAR(100) NOT NULL COMMENT 'å²—ä½åç§°',
    position_level ENUM('é«˜çº§', 'ä¸­çº§', 'åˆçº§') DEFAULT 'ä¸­çº§' COMMENT 'å²—ä½çº§åˆ«',
    planned_count INT DEFAULT 1 COMMENT 'è®¡åˆ’äººæ•°',
    actual_count INT DEFAULT 0 COMMENT 'å®é™…äººæ•°',
    base_salary DECIMAL(10,2) DEFAULT 0 COMMENT 'åŸºç¡€è–ªèµ„',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨',
    description TEXT COMMENT 'å²—ä½æè¿°',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_dept_id (dept_id),
    INDEX idx_status (status),
    FOREIGN KEY (dept_id) REFERENCES departments(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å²—ä½è¡¨';

-- å‘˜å·¥è¡¨  
CREATE TABLE employees (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id VARCHAR(36) UNIQUE COMMENT 'å…³è”ç”¨æˆ·ID',
    employee_no VARCHAR(20) UNIQUE NOT NULL COMMENT 'å‘˜å·¥å·¥å·',
    employee_name VARCHAR(50) NOT NULL COMMENT 'å‘˜å·¥å§“å',
    dept_id VARCHAR(36) NOT NULL COMMENT 'éƒ¨é—¨ID',
    position_id VARCHAR(36) COMMENT 'å²—ä½ID',
    phone VARCHAR(20) COMMENT 'æ‰‹æœºå·',
    email VARCHAR(100) COMMENT 'é‚®ç®±',
    hire_date DATE COMMENT 'å…¥èŒæ—¥æœŸ',
    leave_date DATE COMMENT 'ç¦»èŒæ—¥æœŸ',
    status ENUM('åœ¨èŒ', 'ç¦»èŒ', 'è¯•ç”¨') DEFAULT 'è¯•ç”¨' COMMENT 'å‘˜å·¥çŠ¶æ€',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_employee_no (employee_no),
    INDEX idx_dept_id (dept_id),
    INDEX idx_position_id (position_id),
    INDEX idx_status (status),
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (dept_id) REFERENCES departments(id),
    FOREIGN KEY (position_id) REFERENCES positions(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å‘˜å·¥è¡¨';
```

#### 1.3 è¾…åŠ©æ ¸ç®—è®¾ç½®
```sql
-- è¾…åŠ©æ ¸ç®—é¡¹ç›®è¡¨
CREATE TABLE auxiliary_items (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    aux_type ENUM('éƒ¨é—¨', 'å®¢æˆ·', 'ä¾›åº”å•†', 'é¡¹ç›®', 'ä¸ªäºº', 'è‡ªå®šä¹‰') NOT NULL COMMENT 'è¾…åŠ©æ ¸ç®—ç±»å‹',
    aux_code VARCHAR(20) NOT NULL COMMENT 'è¾…åŠ©é¡¹ç›®ç¼–ç ',
    aux_name VARCHAR(100) NOT NULL COMMENT 'è¾…åŠ©é¡¹ç›®åç§°',
    contact_person VARCHAR(50) COMMENT 'è”ç³»äºº',
    phone VARCHAR(20) COMMENT 'è”ç³»ç”µè¯',
    address TEXT COMMENT 'åœ°å€',
    manager VARCHAR(50) COMMENT 'è´Ÿè´£äºº',
    budget DECIMAL(15,2) COMMENT 'é¢„ç®—é‡‘é¢',
    start_date DATE COMMENT 'å¼€å§‹æ—¥æœŸ',
    deadline DATE COMMENT 'æˆªæ­¢æ—¥æœŸ',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    UNIQUE KEY uk_aux_type_code (aux_type, aux_code),
    INDEX idx_aux_type (aux_type),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='è¾…åŠ©æ ¸ç®—é¡¹ç›®è¡¨';
```

#### 1.4 å¸ç§æ±‡ç‡ç®¡ç†
```sql
-- å¸ç§è¡¨
CREATE TABLE currencies (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    currency_code VARCHAR(3) UNIQUE NOT NULL COMMENT 'å¸ç§ä»£ç ',
    currency_name VARCHAR(50) NOT NULL COMMENT 'å¸ç§åç§°',
    currency_symbol VARCHAR(10) NOT NULL COMMENT 'å¸ç§ç¬¦å·',
    exchange_rate DECIMAL(10,4) DEFAULT 1.0000 COMMENT 'å½“å‰æ±‡ç‡',
    is_base BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦åŸºå‡†å¸ç§',
    decimal_places TINYINT DEFAULT 2 COMMENT 'å°æ•°ä½æ•°',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_currency_code (currency_code),
    INDEX idx_is_base (is_base),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å¸ç§è¡¨';

-- æ±‡ç‡å†å²è¡¨
CREATE TABLE exchange_rate_history (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    currency_code VARCHAR(3) NOT NULL COMMENT 'å¸ç§ä»£ç ',
    rate DECIMAL(10,4) NOT NULL COMMENT 'æ±‡ç‡',
    change_amount DECIMAL(10,4) DEFAULT 0 COMMENT 'å˜åŠ¨é‡‘é¢',
    change_percent DECIMAL(6,4) DEFAULT 0 COMMENT 'å˜åŠ¨ç™¾åˆ†æ¯”',
    rate_date DATE NOT NULL COMMENT 'æ±‡ç‡æ—¥æœŸ',
    operator VARCHAR(50) COMMENT 'æ“ä½œå‘˜',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_currency_date (currency_code, rate_date),
    INDEX idx_rate_date (rate_date),
    FOREIGN KEY (currency_code) REFERENCES currencies(currency_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ±‡ç‡å†å²è¡¨';
```

#### 1.5 ç³»ç»Ÿå‚æ•°è®¾ç½®
```sql
-- ç³»ç»Ÿå‚æ•°è¡¨
CREATE TABLE system_settings (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    setting_group VARCHAR(50) NOT NULL COMMENT 'å‚æ•°åˆ†ç»„',
    setting_key VARCHAR(100) NOT NULL COMMENT 'å‚æ•°é”®',
    setting_value TEXT COMMENT 'å‚æ•°å€¼',
    setting_type ENUM('string', 'number', 'boolean', 'json', 'date') DEFAULT 'string' COMMENT 'å‚æ•°ç±»å‹',
    description TEXT COMMENT 'å‚æ•°è¯´æ˜',
    is_system BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç³»ç»Ÿå‚æ•°',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    updated_by VARCHAR(36),
    
    UNIQUE KEY uk_group_key (setting_group, setting_key),
    INDEX idx_setting_group (setting_group)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç³»ç»Ÿå‚æ•°è¡¨';
```

### 2. ä¼šè®¡æ ¸ç®—æ¨¡å—

#### 2.1 ç§‘ç›®ç®¡ç† (å·²æœ‰)
```sql
-- å·²æœ‰è¡¨ç»“æ„ (02_chart_of_accounts_tables.sql)
-- chart_of_accounts, initial_balances, accounting_periods
```

#### 2.2 å‡­è¯ç®¡ç†
```sql
-- å‡­è¯ä¸»è¡¨
CREATE TABLE vouchers (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    voucher_no VARCHAR(20) NOT NULL COMMENT 'å‡­è¯å·',
    voucher_date DATE NOT NULL COMMENT 'å‡­è¯æ—¥æœŸ',
    voucher_type VARCHAR(10) DEFAULT 'è®°' COMMENT 'å‡­è¯å­— (è®°/æ”¶/ä»˜/è½¬)',
    fiscal_period VARCHAR(7) NOT NULL COMMENT 'ä¼šè®¡æœŸé—´ YYYY-MM',
    attachment_count INT DEFAULT 0 COMMENT 'é™„ä»¶æ•°é‡',
    prepared_by VARCHAR(50) NOT NULL COMMENT 'åˆ¶å•äºº',
    audit_by VARCHAR(50) COMMENT 'å®¡æ ¸äºº',
    post_by VARCHAR(50) COMMENT 'è®°è´¦äºº',
    status ENUM('draft', 'pending', 'approved', 'posted', 'rejected') DEFAULT 'draft' COMMENT 'å‡­è¯çŠ¶æ€',
    remark TEXT COMMENT 'å‡­è¯å¤‡æ³¨',
    total_debit DECIMAL(15,2) DEFAULT 0 COMMENT 'å€Ÿæ–¹åˆè®¡',
    total_credit DECIMAL(15,2) DEFAULT 0 COMMENT 'è´·æ–¹åˆè®¡',
    submit_time DATETIME COMMENT 'æäº¤æ—¶é—´',
    audit_time DATETIME COMMENT 'å®¡æ ¸æ—¶é—´',
    post_time DATETIME COMMENT 'è®°è´¦æ—¶é—´',
    reverse_voucher_id VARCHAR(36) COMMENT 'å†²é”€å‡­è¯ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    version INT DEFAULT 0,
    
    UNIQUE KEY uk_voucher_period (voucher_no, fiscal_period, voucher_type),
    INDEX idx_voucher_date (voucher_date),
    INDEX idx_fiscal_period (fiscal_period),
    INDEX idx_status (status),
    INDEX idx_prepared_by (prepared_by),
    INDEX idx_audit_by (audit_by),
    FOREIGN KEY (reverse_voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å‡­è¯ä¸»è¡¨';

-- å‡­è¯åˆ†å½•è¡¨
CREATE TABLE voucher_entries (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    voucher_id VARCHAR(36) NOT NULL COMMENT 'å‡­è¯ID',
    entry_seq INT NOT NULL COMMENT 'åˆ†å½•åºå·',
    account_id VARCHAR(36) NOT NULL COMMENT 'ç§‘ç›®ID',
    account_code VARCHAR(20) NOT NULL COMMENT 'ç§‘ç›®ç¼–ç ',
    account_name VARCHAR(100) NOT NULL COMMENT 'ç§‘ç›®åç§°',
    summary VARCHAR(200) COMMENT 'æ‘˜è¦',
    debit_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'å€Ÿæ–¹é‡‘é¢',
    credit_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'è´·æ–¹é‡‘é¢',
    currency_code VARCHAR(3) DEFAULT 'CNY' COMMENT 'å¸ç§',
    exchange_rate DECIMAL(10,4) DEFAULT 1.0000 COMMENT 'æ±‡ç‡',
    original_amount DECIMAL(15,2) COMMENT 'åŸå¸é‡‘é¢',
    quantity DECIMAL(15,4) COMMENT 'æ•°é‡',
    unit_price DECIMAL(15,6) COMMENT 'å•ä»·',
    auxiliary_data JSON COMMENT 'è¾…åŠ©æ ¸ç®—æ•°æ®',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    
    INDEX idx_voucher_id (voucher_id),
    INDEX idx_account_id (account_id),
    INDEX idx_account_code (account_code),
    INDEX idx_entry_seq (voucher_id, entry_seq),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id) ON DELETE CASCADE,
    FOREIGN KEY (account_id) REFERENCES chart_of_accounts(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å‡­è¯åˆ†å½•è¡¨';

-- å‡­è¯é™„ä»¶è¡¨
CREATE TABLE voucher_attachments (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    voucher_id VARCHAR(36) NOT NULL COMMENT 'å‡­è¯ID',
    file_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶å',
    file_path VARCHAR(500) COMMENT 'æ–‡ä»¶è·¯å¾„',
    file_size BIGINT COMMENT 'æ–‡ä»¶å¤§å°',
    file_type VARCHAR(50) COMMENT 'æ–‡ä»¶ç±»å‹',
    uploaded_by VARCHAR(50) COMMENT 'ä¸Šä¼ äºº',
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_voucher_id (voucher_id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å‡­è¯é™„ä»¶è¡¨';

-- å‡­è¯æ¨¡æ¿è¡¨
CREATE TABLE voucher_templates (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    template_name VARCHAR(100) NOT NULL COMMENT 'æ¨¡æ¿åç§°',
    template_type ENUM('æ”¶å…¥', 'æ”¯å‡º', 'è½¬è´¦', 'è°ƒæ•´') NOT NULL COMMENT 'æ¨¡æ¿ç±»å‹',
    description TEXT COMMENT 'æ¨¡æ¿æè¿°',
    template_data JSON NOT NULL COMMENT 'æ¨¡æ¿æ•°æ®',
    is_public BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦å…¬å¼€',
    usage_count INT DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_template_type (template_type),
    INDEX idx_created_by (created_by)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å‡­è¯æ¨¡æ¿è¡¨';
```

#### 2.3 è´¦ç°¿ç®¡ç†
```sql
-- æ€»è´¦è¡¨
CREATE TABLE general_ledger (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    account_id VARCHAR(36) NOT NULL COMMENT 'ç§‘ç›®ID',
    account_code VARCHAR(20) NOT NULL COMMENT 'ç§‘ç›®ç¼–ç ',
    account_name VARCHAR(100) NOT NULL COMMENT 'ç§‘ç›®åç§°',
    fiscal_year INT NOT NULL COMMENT 'ä¼šè®¡å¹´åº¦',
    fiscal_period INT NOT NULL COMMENT 'ä¼šè®¡æœŸé—´',
    beginning_balance DECIMAL(15,2) DEFAULT 0 COMMENT 'æœŸåˆä½™é¢',
    period_debit DECIMAL(15,2) DEFAULT 0 COMMENT 'æœ¬æœŸå€Ÿæ–¹',
    period_credit DECIMAL(15,2) DEFAULT 0 COMMENT 'æœ¬æœŸè´·æ–¹',
    ending_balance DECIMAL(15,2) DEFAULT 0 COMMENT 'æœŸæœ«ä½™é¢',
    ytd_debit DECIMAL(15,2) DEFAULT 0 COMMENT 'å¹´åˆè‡³ä»Šå€Ÿæ–¹',
    ytd_credit DECIMAL(15,2) DEFAULT 0 COMMENT 'å¹´åˆè‡³ä»Šè´·æ–¹',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_account_period (account_id, fiscal_year, fiscal_period),
    INDEX idx_account_code (account_code),
    INDEX idx_fiscal_period (fiscal_year, fiscal_period),
    FOREIGN KEY (account_id) REFERENCES chart_of_accounts(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ€»è´¦è¡¨';

-- æ˜ç»†è´¦è¡¨
CREATE TABLE detail_ledger (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    voucher_id VARCHAR(36) NOT NULL COMMENT 'å‡­è¯ID',
    entry_id VARCHAR(36) NOT NULL COMMENT 'åˆ†å½•ID',
    account_id VARCHAR(36) NOT NULL COMMENT 'ç§‘ç›®ID',
    account_code VARCHAR(20) NOT NULL COMMENT 'ç§‘ç›®ç¼–ç ',
    voucher_date DATE NOT NULL COMMENT 'å‡­è¯æ—¥æœŸ',
    voucher_no VARCHAR(20) NOT NULL COMMENT 'å‡­è¯å·',
    voucher_type VARCHAR(10) NOT NULL COMMENT 'å‡­è¯å­—',
    summary VARCHAR(200) COMMENT 'æ‘˜è¦',
    debit_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'å€Ÿæ–¹é‡‘é¢',
    credit_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'è´·æ–¹é‡‘é¢',
    balance DECIMAL(15,2) DEFAULT 0 COMMENT 'ä½™é¢',
    auxiliary_data JSON COMMENT 'è¾…åŠ©æ ¸ç®—ä¿¡æ¯',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_voucher_id (voucher_id),
    INDEX idx_account_id (account_id),
    INDEX idx_account_code (account_code),
    INDEX idx_voucher_date (voucher_date),
    INDEX idx_voucher_no (voucher_no),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id),
    FOREIGN KEY (entry_id) REFERENCES voucher_entries(id),
    FOREIGN KEY (account_id) REFERENCES chart_of_accounts(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ˜ç»†è´¦è¡¨';
```

### 3. ç°é‡‘ç®¡ç†æ¨¡å—

```sql
-- ç°é‡‘é“¶è¡Œè´¦æˆ·è¡¨
CREATE TABLE cash_bank_accounts (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    account_code VARCHAR(20) UNIQUE NOT NULL COMMENT 'è´¦æˆ·ç¼–ç ',
    account_name VARCHAR(100) NOT NULL COMMENT 'è´¦æˆ·åç§°',
    account_type ENUM('ç°é‡‘', 'é“¶è¡Œå­˜æ¬¾', 'å…¶ä»–è´§å¸èµ„é‡‘') NOT NULL COMMENT 'è´¦æˆ·ç±»å‹',
    bank_name VARCHAR(100) COMMENT 'å¼€æˆ·é“¶è¡Œ',
    account_number VARCHAR(50) COMMENT 'è´¦å·',
    currency_code VARCHAR(3) DEFAULT 'CNY' COMMENT 'å¸ç§',
    current_balance DECIMAL(15,2) DEFAULT 0 COMMENT 'å½“å‰ä½™é¢',
    account_manager VARCHAR(50) COMMENT 'è´¦æˆ·ç®¡ç†å‘˜',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_account_code (account_code),
    INDEX idx_account_type (account_type),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç°é‡‘é“¶è¡Œè´¦æˆ·è¡¨';

-- ç°é‡‘æ—¥è®°è´¦è¡¨
CREATE TABLE cash_journal (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    account_id VARCHAR(36) NOT NULL COMMENT 'è´¦æˆ·ID',
    journal_date DATE NOT NULL COMMENT 'è®°è´¦æ—¥æœŸ',
    voucher_id VARCHAR(36) COMMENT 'å…³è”å‡­è¯ID',
    voucher_no VARCHAR(20) COMMENT 'å‡­è¯å·',
    summary VARCHAR(200) NOT NULL COMMENT 'æ‘˜è¦',
    opposite_account VARCHAR(100) COMMENT 'å¯¹æ–¹ç§‘ç›®',
    income_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'æ”¶å…¥é‡‘é¢',
    expense_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'æ”¯å‡ºé‡‘é¢',
    balance DECIMAL(15,2) NOT NULL COMMENT 'ä½™é¢',
    operator VARCHAR(50) COMMENT 'æ“ä½œå‘˜',
    business_type ENUM('æ”¶å…¥', 'æ”¯å‡º') NOT NULL COMMENT 'ä¸šåŠ¡ç±»å‹',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_account_id (account_id),
    INDEX idx_journal_date (journal_date),
    INDEX idx_voucher_id (voucher_id),
    INDEX idx_business_type (business_type),
    FOREIGN KEY (account_id) REFERENCES cash_bank_accounts(id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç°é‡‘æ—¥è®°è´¦è¡¨';

-- ç°é‡‘ç›˜ç‚¹è¡¨
CREATE TABLE cash_inventory (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    inventory_no VARCHAR(20) UNIQUE NOT NULL COMMENT 'ç›˜ç‚¹å•å·',
    account_id VARCHAR(36) NOT NULL COMMENT 'ç°é‡‘è´¦æˆ·ID',
    inventory_date DATE NOT NULL COMMENT 'ç›˜ç‚¹æ—¥æœŸ',
    operator VARCHAR(50) NOT NULL COMMENT 'ç›˜ç‚¹äºº',
    supervisor VARCHAR(50) COMMENT 'ç›‘ç›˜äºº',
    book_balance DECIMAL(15,2) NOT NULL COMMENT 'è´¦é¢ä½™é¢',
    actual_balance DECIMAL(15,2) NOT NULL COMMENT 'å®é™…ä½™é¢',
    difference DECIMAL(15,2) NOT NULL COMMENT 'å·®é¢',
    status ENUM('draft', 'confirmed', 'processed') DEFAULT 'draft' COMMENT 'çŠ¶æ€',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    
    INDEX idx_inventory_no (inventory_no),
    INDEX idx_account_id (account_id),
    INDEX idx_inventory_date (inventory_date),
    INDEX idx_status (status),
    FOREIGN KEY (account_id) REFERENCES cash_bank_accounts(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç°é‡‘ç›˜ç‚¹è¡¨';

-- ç°é‡‘ç›˜ç‚¹æ˜ç»†è¡¨
CREATE TABLE cash_inventory_details (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    inventory_id VARCHAR(36) NOT NULL COMMENT 'ç›˜ç‚¹ID',
    denomination VARCHAR(20) NOT NULL COMMENT 'é¢é¢',
    quantity INT NOT NULL COMMENT 'æ•°é‡',
    amount DECIMAL(15,2) NOT NULL COMMENT 'é‡‘é¢',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_inventory_id (inventory_id),
    FOREIGN KEY (inventory_id) REFERENCES cash_inventory(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç°é‡‘ç›˜ç‚¹æ˜ç»†è¡¨';

-- é“¶è¡Œå¯¹è´¦è¡¨
CREATE TABLE bank_reconciliation (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    account_id VARCHAR(36) NOT NULL COMMENT 'é“¶è¡Œè´¦æˆ·ID',
    reconcile_date DATE NOT NULL COMMENT 'å¯¹è´¦æ—¥æœŸ',
    statement_balance DECIMAL(15,2) NOT NULL COMMENT 'é“¶è¡Œå¯¹è´¦å•ä½™é¢',
    book_balance DECIMAL(15,2) NOT NULL COMMENT 'è´¦é¢ä½™é¢',
    reconciled_balance DECIMAL(15,2) NOT NULL COMMENT 'è°ƒèŠ‚åä½™é¢',
    operator VARCHAR(50) NOT NULL COMMENT 'å¯¹è´¦äºº',
    status ENUM('draft', 'completed', 'confirmed') DEFAULT 'draft' COMMENT 'å¯¹è´¦çŠ¶æ€',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    
    INDEX idx_account_id (account_id),
    INDEX idx_reconcile_date (reconcile_date),
    INDEX idx_status (status),
    FOREIGN KEY (account_id) REFERENCES cash_bank_accounts(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é“¶è¡Œå¯¹è´¦è¡¨';
```

### 4. å¾€æ¥è´¦æ¬¾æ¨¡å—

```sql
-- å®¢æˆ·è¡¨
CREATE TABLE customers (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    customer_code VARCHAR(20) UNIQUE NOT NULL COMMENT 'å®¢æˆ·ç¼–ç ',
    customer_name VARCHAR(100) NOT NULL COMMENT 'å®¢æˆ·åç§°',
    short_name VARCHAR(50) COMMENT 'ç®€ç§°',
    customer_type ENUM('ä¼ä¸š', 'ä¸ªäºº', 'æ”¿åºœ', 'å…¶ä»–') DEFAULT 'ä¼ä¸š' COMMENT 'å®¢æˆ·ç±»å‹',
    tax_number VARCHAR(50) COMMENT 'ç¨å·',
    legal_person VARCHAR(50) COMMENT 'æ³•äººä»£è¡¨',
    contact_person VARCHAR(50) COMMENT 'è”ç³»äºº',
    phone VARCHAR(20) COMMENT 'è”ç³»ç”µè¯',
    mobile VARCHAR(20) COMMENT 'æ‰‹æœºå·',
    email VARCHAR(100) COMMENT 'é‚®ç®±',
    address TEXT COMMENT 'åœ°å€',
    postal_code VARCHAR(10) COMMENT 'é‚®ç¼–',
    credit_limit DECIMAL(15,2) DEFAULT 0 COMMENT 'ä¿¡ç”¨é¢åº¦',
    payment_terms INT DEFAULT 30 COMMENT 'ä»˜æ¬¾æœŸé™(å¤©)',
    bank_name VARCHAR(100) COMMENT 'å¼€æˆ·é“¶è¡Œ',
    bank_account VARCHAR(50) COMMENT 'é“¶è¡Œè´¦å·',
    salesman VARCHAR(50) COMMENT 'ä¸šåŠ¡å‘˜',
    industry VARCHAR(50) COMMENT 'è¡Œä¸š',
    status ENUM('active', 'inactive', 'blacklist') DEFAULT 'active' COMMENT 'çŠ¶æ€',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_customer_code (customer_code),
    INDEX idx_customer_name (customer_name),
    INDEX idx_contact_person (contact_person),
    INDEX idx_salesman (salesman),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å®¢æˆ·è¡¨';

-- ä¾›åº”å•†è¡¨
CREATE TABLE suppliers (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    supplier_code VARCHAR(20) UNIQUE NOT NULL COMMENT 'ä¾›åº”å•†ç¼–ç ',
    supplier_name VARCHAR(100) NOT NULL COMMENT 'ä¾›åº”å•†åç§°',
    short_name VARCHAR(50) COMMENT 'ç®€ç§°',
    supplier_type ENUM('åˆ¶é€ å•†', 'è´¸æ˜“å•†', 'æœåŠ¡å•†', 'å…¶ä»–') DEFAULT 'åˆ¶é€ å•†' COMMENT 'ä¾›åº”å•†ç±»å‹',
    tax_number VARCHAR(50) COMMENT 'ç¨å·',
    legal_person VARCHAR(50) COMMENT 'æ³•äººä»£è¡¨',
    contact_person VARCHAR(50) COMMENT 'è”ç³»äºº',
    phone VARCHAR(20) COMMENT 'è”ç³»ç”µè¯',
    mobile VARCHAR(20) COMMENT 'æ‰‹æœºå·',
    email VARCHAR(100) COMMENT 'é‚®ç®±',
    address TEXT COMMENT 'åœ°å€',
    postal_code VARCHAR(10) COMMENT 'é‚®ç¼–',
    payment_terms VARCHAR(100) COMMENT 'ä»˜æ¬¾æ¡ä»¶',
    bank_name VARCHAR(100) COMMENT 'å¼€æˆ·é“¶è¡Œ',
    bank_account VARCHAR(50) COMMENT 'é“¶è¡Œè´¦å·',
    purchaser VARCHAR(50) COMMENT 'é‡‡è´­å‘˜',
    industry VARCHAR(50) COMMENT 'è¡Œä¸š',
    qualification JSON COMMENT 'èµ„è´¨ä¿¡æ¯',
    rating ENUM('A', 'B', 'C', 'D') COMMENT 'ä¾›åº”å•†ç­‰çº§',
    status ENUM('active', 'inactive', 'blacklist') DEFAULT 'active' COMMENT 'çŠ¶æ€',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_supplier_code (supplier_code),
    INDEX idx_supplier_name (supplier_name),
    INDEX idx_contact_person (contact_person),
    INDEX idx_purchaser (purchaser),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ä¾›åº”å•†è¡¨';

-- é”€å”®å‘ç¥¨è¡¨
CREATE TABLE sales_invoices (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    invoice_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'å‘ç¥¨å·',
    invoice_date DATE NOT NULL COMMENT 'å¼€ç¥¨æ—¥æœŸ',
    customer_id VARCHAR(36) NOT NULL COMMENT 'å®¢æˆ·ID',
    customer_name VARCHAR(100) NOT NULL COMMENT 'å®¢æˆ·åç§°',
    business_type ENUM('é”€å”®', 'æœåŠ¡', 'å…¶ä»–') DEFAULT 'é”€å”®' COMMENT 'ä¸šåŠ¡ç±»å‹',
    total_amount DECIMAL(15,2) NOT NULL COMMENT 'å«ç¨æ€»é¢',
    tax_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'ç¨é¢',
    net_amount DECIMAL(15,2) NOT NULL COMMENT 'ä¸å«ç¨é‡‘é¢',
    tax_rate DECIMAL(6,4) DEFAULT 0.13 COMMENT 'ç¨ç‡',
    currency_code VARCHAR(3) DEFAULT 'CNY' COMMENT 'å¸ç§',
    exchange_rate DECIMAL(10,4) DEFAULT 1.0000 COMMENT 'æ±‡ç‡',
    received_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'å·²æ”¶æ¬¾é‡‘é¢',
    remaining_amount DECIMAL(15,2) NOT NULL COMMENT 'æœªæ”¶æ¬¾é‡‘é¢',
    due_date DATE COMMENT 'åˆ°æœŸæ—¥æœŸ',
    status ENUM('invoiced', 'partial', 'paid', 'overdue', 'cancelled') DEFAULT 'invoiced' COMMENT 'å‘ç¥¨çŠ¶æ€',
    salesman VARCHAR(50) COMMENT 'ä¸šåŠ¡å‘˜',
    voucher_id VARCHAR(36) COMMENT 'å…³è”å‡­è¯ID',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_invoice_no (invoice_no),
    INDEX idx_customer_id (customer_id),
    INDEX idx_invoice_date (invoice_date),
    INDEX idx_due_date (due_date),
    INDEX idx_status (status),
    INDEX idx_salesman (salesman),
    FOREIGN KEY (customer_id) REFERENCES customers(id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é”€å”®å‘ç¥¨è¡¨';

-- é‡‡è´­å‘ç¥¨è¡¨  
CREATE TABLE purchase_invoices (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    invoice_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'å‘ç¥¨å·',
    invoice_date DATE NOT NULL COMMENT 'å¼€ç¥¨æ—¥æœŸ',
    supplier_id VARCHAR(36) NOT NULL COMMENT 'ä¾›åº”å•†ID',
    supplier_name VARCHAR(100) NOT NULL COMMENT 'ä¾›åº”å•†åç§°',
    business_type ENUM('é‡‡è´­', 'æœåŠ¡', 'å…¶ä»–') DEFAULT 'é‡‡è´­' COMMENT 'ä¸šåŠ¡ç±»å‹',
    total_amount DECIMAL(15,2) NOT NULL COMMENT 'å«ç¨æ€»é¢',
    tax_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'ç¨é¢',
    net_amount DECIMAL(15,2) NOT NULL COMMENT 'ä¸å«ç¨é‡‘é¢',
    tax_rate DECIMAL(6,4) DEFAULT 0.13 COMMENT 'ç¨ç‡',
    currency_code VARCHAR(3) DEFAULT 'CNY' COMMENT 'å¸ç§',
    exchange_rate DECIMAL(10,4) DEFAULT 1.0000 COMMENT 'æ±‡ç‡',
    paid_amount DECIMAL(15,2) DEFAULT 0 COMMENT 'å·²ä»˜æ¬¾é‡‘é¢',
    remaining_amount DECIMAL(15,2) NOT NULL COMMENT 'æœªä»˜æ¬¾é‡‘é¢',
    due_date DATE COMMENT 'åˆ°æœŸæ—¥æœŸ',
    status ENUM('confirmed', 'partial', 'paid', 'overdue', 'cancelled') DEFAULT 'confirmed' COMMENT 'å‘ç¥¨çŠ¶æ€',
    purchaser VARCHAR(50) COMMENT 'é‡‡è´­å‘˜',
    voucher_id VARCHAR(36) COMMENT 'å…³è”å‡­è¯ID',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_invoice_no (invoice_no),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_invoice_date (invoice_date),
    INDEX idx_due_date (due_date),
    INDEX idx_status (status),
    INDEX idx_purchaser (purchaser),
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='é‡‡è´­å‘ç¥¨è¡¨';

-- æ”¶æ¬¾è®°å½•è¡¨
CREATE TABLE receivable_payments (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    payment_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'æ”¶æ¬¾å•å·',
    payment_date DATE NOT NULL COMMENT 'æ”¶æ¬¾æ—¥æœŸ',
    customer_id VARCHAR(36) NOT NULL COMMENT 'å®¢æˆ·ID',
    total_amount DECIMAL(15,2) NOT NULL COMMENT 'æ”¶æ¬¾æ€»é¢',
    payment_method ENUM('è½¬è´¦', 'ç°é‡‘', 'æ”¯ç¥¨', 'ç”µæ±‡', 'å…¶ä»–') NOT NULL COMMENT 'æ”¶æ¬¾æ–¹å¼',
    bank_account_id VARCHAR(36) COMMENT 'æ”¶æ¬¾è´¦æˆ·ID',
    operator VARCHAR(50) NOT NULL COMMENT 'æ“ä½œå‘˜',
    status ENUM('draft', 'confirmed', 'cancelled') DEFAULT 'confirmed' COMMENT 'çŠ¶æ€',
    voucher_id VARCHAR(36) COMMENT 'å…³è”å‡­è¯ID',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    
    INDEX idx_payment_no (payment_no),
    INDEX idx_customer_id (customer_id),
    INDEX idx_payment_date (payment_date),
    INDEX idx_status (status),
    FOREIGN KEY (customer_id) REFERENCES customers(id),
    FOREIGN KEY (bank_account_id) REFERENCES cash_bank_accounts(id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ”¶æ¬¾è®°å½•è¡¨';

-- æ”¶æ¬¾æ˜ç»†è¡¨  
CREATE TABLE receivable_payment_details (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    payment_id VARCHAR(36) NOT NULL COMMENT 'æ”¶æ¬¾ID',
    invoice_id VARCHAR(36) NOT NULL COMMENT 'å‘ç¥¨ID',
    allocated_amount DECIMAL(15,2) NOT NULL COMMENT 'æ ¸é”€é‡‘é¢',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_payment_id (payment_id),
    INDEX idx_invoice_id (invoice_id),
    FOREIGN KEY (payment_id) REFERENCES receivable_payments(id) ON DELETE CASCADE,
    FOREIGN KEY (invoice_id) REFERENCES sales_invoices(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ”¶æ¬¾æ˜ç»†è¡¨';

-- ä»˜æ¬¾ç”³è¯·è¡¨
CREATE TABLE payment_applications (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    application_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'ç”³è¯·å•å·',
    application_date DATE NOT NULL COMMENT 'ç”³è¯·æ—¥æœŸ',
    supplier_id VARCHAR(36) NOT NULL COMMENT 'ä¾›åº”å•†ID',
    supplier_name VARCHAR(100) NOT NULL COMMENT 'ä¾›åº”å•†åç§°',
    amount DECIMAL(15,2) NOT NULL COMMENT 'ç”³è¯·é‡‘é¢',
    payment_method ENUM('è½¬è´¦', 'ç°é‡‘', 'æ”¯ç¥¨', 'æ±‡ç¥¨', 'å…¶ä»–') NOT NULL COMMENT 'ä»˜æ¬¾æ–¹å¼',
    planned_pay_date DATE COMMENT 'è®¡åˆ’ä»˜æ¬¾æ—¥æœŸ',
    urgency ENUM('æ™®é€š', 'ç´§æ€¥', 'ç‰¹æ€¥') DEFAULT 'æ™®é€š' COMMENT 'ç´§æ€¥ç¨‹åº¦',
    applicant VARCHAR(50) NOT NULL COMMENT 'ç”³è¯·äºº',
    applicant_dept VARCHAR(100) COMMENT 'ç”³è¯·éƒ¨é—¨',
    business_reason TEXT NOT NULL COMMENT 'ç”³è¯·äº‹ç”±',
    status ENUM('pending', 'approved', 'rejected', 'paid', 'cancelled') DEFAULT 'pending' COMMENT 'å®¡æ‰¹çŠ¶æ€',
    approval_level INT DEFAULT 1 COMMENT 'å½“å‰å®¡æ‰¹çº§åˆ«',
    current_approver VARCHAR(50) COMMENT 'å½“å‰å®¡æ‰¹äºº',
    audit_by VARCHAR(50) COMMENT 'æœ€ç»ˆå®¡æ‰¹äºº',
    audit_time DATETIME COMMENT 'å®¡æ‰¹æ—¶é—´',
    audit_opinion TEXT COMMENT 'å®¡æ‰¹æ„è§',
    payment_voucher_id VARCHAR(36) COMMENT 'ä»˜æ¬¾å‡­è¯ID',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    
    INDEX idx_application_no (application_no),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_application_date (application_date),
    INDEX idx_status (status),
    INDEX idx_applicant (applicant),
    INDEX idx_current_approver (current_approver),
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id),
    FOREIGN KEY (payment_voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ä»˜æ¬¾ç”³è¯·è¡¨';

-- ä»˜æ¬¾ç”³è¯·æ˜ç»†è¡¨
CREATE TABLE payment_application_details (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    application_id VARCHAR(36) NOT NULL COMMENT 'ç”³è¯·ID',
    invoice_id VARCHAR(36) COMMENT 'å‘ç¥¨ID',
    invoice_no VARCHAR(30) COMMENT 'å‘ç¥¨å·',
    invoice_amount DECIMAL(15,2) COMMENT 'å‘ç¥¨é‡‘é¢',
    apply_amount DECIMAL(15,2) NOT NULL COMMENT 'ç”³è¯·ä»˜æ¬¾é‡‘é¢',
    remark VARCHAR(200) COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_application_id (application_id),
    INDEX idx_invoice_id (invoice_id),
    FOREIGN KEY (application_id) REFERENCES payment_applications(id) ON DELETE CASCADE,
    FOREIGN KEY (invoice_id) REFERENCES purchase_invoices(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ä»˜æ¬¾ç”³è¯·æ˜ç»†è¡¨';

-- ä»˜æ¬¾è®°å½•è¡¨
CREATE TABLE payable_payments (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    payment_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'ä»˜æ¬¾å•å·',
    application_id VARCHAR(36) COMMENT 'ä»˜æ¬¾ç”³è¯·ID',
    payment_date DATE NOT NULL COMMENT 'ä»˜æ¬¾æ—¥æœŸ',
    supplier_id VARCHAR(36) NOT NULL COMMENT 'ä¾›åº”å•†ID',
    total_amount DECIMAL(15,2) NOT NULL COMMENT 'ä»˜æ¬¾æ€»é¢',
    payment_method ENUM('è½¬è´¦', 'ç°é‡‘', 'æ”¯ç¥¨', 'æ±‡ç¥¨', 'å…¶ä»–') NOT NULL COMMENT 'ä»˜æ¬¾æ–¹å¼',
    bank_account_id VARCHAR(36) COMMENT 'ä»˜æ¬¾è´¦æˆ·ID',
    operator VARCHAR(50) NOT NULL COMMENT 'æ“ä½œå‘˜',
    status ENUM('draft', 'confirmed', 'cancelled') DEFAULT 'confirmed' COMMENT 'çŠ¶æ€',
    voucher_id VARCHAR(36) COMMENT 'å…³è”å‡­è¯ID',
    remark TEXT COMMENT 'å¤‡æ³¨',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    
    INDEX idx_payment_no (payment_no),
    INDEX idx_application_id (application_id),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_payment_date (payment_date),
    INDEX idx_status (status),
    FOREIGN KEY (application_id) REFERENCES payment_applications(id),
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id),
    FOREIGN KEY (bank_account_id) REFERENCES cash_bank_accounts(id),
    FOREIGN KEY (voucher_id) REFERENCES vouchers(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ä»˜æ¬¾è®°å½•è¡¨';
```

### 5. è´¢åŠ¡æŠ¥è¡¨æ¨¡å—

```sql
-- æŠ¥è¡¨æ¨¡æ¿è¡¨
CREATE TABLE report_templates (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    template_code VARCHAR(20) UNIQUE NOT NULL COMMENT 'æ¨¡æ¿ç¼–ç ',
    template_name VARCHAR(100) NOT NULL COMMENT 'æ¨¡æ¿åç§°',
    report_type ENUM('balance_sheet', 'income_statement', 'cash_flow', 'custom') NOT NULL COMMENT 'æŠ¥è¡¨ç±»å‹',
    template_config JSON NOT NULL COMMENT 'æ¨¡æ¿é…ç½®',
    is_default BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦é»˜è®¤æ¨¡æ¿',
    is_system BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç³»ç»Ÿæ¨¡æ¿',
    status ENUM('å¯ç”¨', 'åœç”¨') DEFAULT 'å¯ç”¨',
    description TEXT COMMENT 'æ¨¡æ¿è¯´æ˜',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by VARCHAR(36),
    updated_by VARCHAR(36),
    deleted BOOLEAN DEFAULT FALSE,
    
    INDEX idx_template_code (template_code),
    INDEX idx_report_type (report_type),
    INDEX idx_is_default (is_default)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æŠ¥è¡¨æ¨¡æ¿è¡¨';

-- æŠ¥è¡¨é¡¹ç›®é…ç½®è¡¨
CREATE TABLE report_items (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    template_id VARCHAR(36) NOT NULL COMMENT 'æ¨¡æ¿ID',
    item_code VARCHAR(20) NOT NULL COMMENT 'é¡¹ç›®ç¼–ç ',
    item_name VARCHAR(100) NOT NULL COMMENT 'é¡¹ç›®åç§°',
    item_level INT NOT NULL DEFAULT 1 COMMENT 'é¡¹ç›®å±‚çº§',
    parent_code VARCHAR(20) COMMENT 'çˆ¶é¡¹ç›®ç¼–ç ',
    account_codes TEXT COMMENT 'å¯¹åº”ç§‘ç›®ç¼–ç (JSON)',
    formula TEXT COMMENT 'è®¡ç®—å…¬å¼',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    is_summary BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦åˆè®¡é¡¹',
    is_bold BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦åŠ ç²—æ˜¾ç¤º',
    is_indent BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç¼©è¿›æ˜¾ç¤º',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_template_id (template_id),
    INDEX idx_item_code (item_code),
    INDEX idx_parent_code (parent_code),
    INDEX idx_sort_order (sort_order),
    FOREIGN KEY (template_id) REFERENCES report_templates(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æŠ¥è¡¨é¡¹ç›®é…ç½®è¡¨';

-- æŠ¥è¡¨ç”Ÿæˆè®°å½•è¡¨
CREATE TABLE report_generation_log (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    template_id VARCHAR(36) NOT NULL COMMENT 'æ¨¡æ¿ID',
    report_title VARCHAR(200) NOT NULL COMMENT 'æŠ¥è¡¨æ ‡é¢˜',
    report_period VARCHAR(20) NOT NULL COMMENT 'æŠ¥å‘ŠæœŸé—´',
    start_date DATE COMMENT 'å¼€å§‹æ—¥æœŸ',
    end_date DATE COMMENT 'ç»“æŸæ—¥æœŸ',
    report_data JSON COMMENT 'æŠ¥è¡¨æ•°æ®',
    generation_params JSON COMMENT 'ç”Ÿæˆå‚æ•°',
    generated_by VARCHAR(50) NOT NULL COMMENT 'ç”Ÿæˆäºº',
    generated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    file_path VARCHAR(500) COMMENT 'æ–‡ä»¶è·¯å¾„',
    file_format ENUM('PDF', 'Excel', 'HTML') COMMENT 'æ–‡ä»¶æ ¼å¼',
    
    INDEX idx_template_id (template_id),
    INDEX idx_report_period (report_period),
    INDEX idx_generated_by (generated_by),
    INDEX idx_generated_at (generated_at),
    FOREIGN KEY (template_id) REFERENCES report_templates(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æŠ¥è¡¨ç”Ÿæˆè®°å½•è¡¨';
```

### 6. ç³»ç»Ÿæ—¥å¿—æ¨¡å—

```sql
-- ç³»ç»Ÿæ“ä½œæ—¥å¿—è¡¨
CREATE TABLE system_logs (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id VARCHAR(36) COMMENT 'ç”¨æˆ·ID',
    username VARCHAR(50) COMMENT 'ç”¨æˆ·å',
    module VARCHAR(50) NOT NULL COMMENT 'æ¨¡å—åç§°',
    operation VARCHAR(100) NOT NULL COMMENT 'æ“ä½œåç§°',
    operation_type ENUM('CREATE', 'UPDATE', 'DELETE', 'QUERY', 'EXPORT', 'IMPORT', 'LOGIN', 'LOGOUT') NOT NULL COMMENT 'æ“ä½œç±»å‹',
    business_id VARCHAR(36) COMMENT 'ä¸šåŠ¡ID',
    description TEXT COMMENT 'æ“ä½œæè¿°',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    user_agent TEXT COMMENT 'User Agent',
    request_url VARCHAR(500) COMMENT 'è¯·æ±‚URL',
    request_method VARCHAR(10) COMMENT 'è¯·æ±‚æ–¹æ³•',
    request_params TEXT COMMENT 'è¯·æ±‚å‚æ•°',
    response_status INT COMMENT 'å“åº”çŠ¶æ€ç ',
    execution_time BIGINT COMMENT 'æ‰§è¡Œæ—¶é—´(æ¯«ç§’)',
    error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_user_id (user_id),
    INDEX idx_username (username),
    INDEX idx_module (module),
    INDEX idx_operation_type (operation_type),
    INDEX idx_business_id (business_id),
    INDEX idx_created_at (created_at),
    INDEX idx_ip_address (ip_address),
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç³»ç»Ÿæ“ä½œæ—¥å¿—è¡¨';

-- æ•°æ®å®¡è®¡è®°å½•è¡¨
CREATE TABLE audit_trails (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    table_name VARCHAR(100) NOT NULL COMMENT 'è¡¨å',
    record_id VARCHAR(36) NOT NULL COMMENT 'è®°å½•ID',
    operation ENUM('INSERT', 'UPDATE', 'DELETE') NOT NULL COMMENT 'æ“ä½œç±»å‹',
    old_values JSON COMMENT 'ä¿®æ”¹å‰æ•°æ®',
    new_values JSON COMMENT 'ä¿®æ”¹åæ•°æ®',
    changed_fields TEXT COMMENT 'å˜æ›´å­—æ®µåˆ—è¡¨',
    user_id VARCHAR(36) COMMENT 'æ“ä½œç”¨æˆ·ID',
    username VARCHAR(50) COMMENT 'æ“ä½œç”¨æˆ·å',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_table_record (table_name, record_id),
    INDEX idx_user_id (user_id),
    INDEX idx_username (username),
    INDEX idx_operation (operation),
    INDEX idx_created_at (created_at),
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ•°æ®å®¡è®¡è®°å½•è¡¨';

-- ç™»å½•æ—¥å¿—è¡¨
CREATE TABLE login_logs (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    username VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·å',
    login_type ENUM('WEB', 'MOBILE', 'API') DEFAULT 'WEB' COMMENT 'ç™»å½•ç±»å‹',
    login_status ENUM('SUCCESS', 'FAILED', 'LOGOUT') NOT NULL COMMENT 'ç™»å½•çŠ¶æ€',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    location VARCHAR(200) COMMENT 'ç™»å½•åœ°ç‚¹',
    user_agent TEXT COMMENT 'User Agent',
    failure_reason VARCHAR(200) COMMENT 'å¤±è´¥åŸå› ',
    session_id VARCHAR(100) COMMENT 'ä¼šè¯ID',
    login_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ç™»å½•æ—¶é—´',
    logout_time TIMESTAMP COMMENT 'ç™»å‡ºæ—¶é—´',
    session_duration BIGINT COMMENT 'ä¼šè¯æ—¶é•¿(ç§’)',
    
    INDEX idx_username (username),
    INDEX idx_login_status (login_status),
    INDEX idx_login_time (login_time),
    INDEX idx_ip_address (ip_address),
    INDEX idx_session_id (session_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç™»å½•æ—¥å¿—è¡¨';

-- æ•°æ®å¤‡ä»½è®°å½•è¡¨
CREATE TABLE backup_records (
    id VARCHAR(36) PRIMARY KEY DEFAULT (UUID()),
    backup_no VARCHAR(30) UNIQUE NOT NULL COMMENT 'å¤‡ä»½ç¼–å·',
    backup_type ENUM('FULL', 'INCREMENTAL', 'DIFFERENTIAL') NOT NULL COMMENT 'å¤‡ä»½ç±»å‹',
    backup_mode ENUM('MANUAL', 'AUTO', 'SCHEDULED') DEFAULT 'MANUAL' COMMENT 'å¤‡ä»½æ¨¡å¼',
    backup_filename VARCHAR(255) NOT NULL COMMENT 'å¤‡ä»½æ–‡ä»¶å',
    backup_path VARCHAR(500) COMMENT 'å¤‡ä»½è·¯å¾„',
    file_size BIGINT COMMENT 'æ–‡ä»¶å¤§å°(å­—èŠ‚)',
    backup_status ENUM('RUNNING', 'SUCCESS', 'FAILED', 'CANCELLED') DEFAULT 'RUNNING' COMMENT 'å¤‡ä»½çŠ¶æ€',
    start_time DATETIME NOT NULL COMMENT 'å¼€å§‹æ—¶é—´',
    end_time DATETIME COMMENT 'ç»“æŸæ—¶é—´',
    duration BIGINT COMMENT 'è€—æ—¶(ç§’)',
    operator VARCHAR(50) NOT NULL COMMENT 'æ“ä½œäºº',
    error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    description TEXT COMMENT 'å¤‡ä»½è¯´æ˜',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_backup_no (backup_no),
    INDEX idx_backup_type (backup_type),
    INDEX idx_backup_status (backup_status),
    INDEX idx_start_time (start_time),
    INDEX idx_operator (operator)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ•°æ®å¤‡ä»½è®°å½•è¡¨';
```

---

## ğŸ“‹ æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

### åŸºç¡€æ•°æ®åˆå§‹åŒ–
```sql
-- 1. åˆå§‹åŒ–å¸ç§æ•°æ®
INSERT INTO currencies (currency_code, currency_name, currency_symbol, is_base) VALUES
('CNY', 'äººæ°‘å¸', 'Â¥', TRUE),
('USD', 'ç¾å…ƒ', '$', FALSE),
('EUR', 'æ¬§å…ƒ', 'â‚¬', FALSE),
('JPY', 'æ—¥å…ƒ', 'Â¥', FALSE),
('GBP', 'è‹±é•‘', 'Â£', FALSE);

-- 2. åˆå§‹åŒ–ç³»ç»Ÿå‚æ•°
INSERT INTO system_settings (setting_group, setting_key, setting_value, setting_type, description) VALUES
('company', 'company_name', 'ç¤ºä¾‹å…¬å¸', 'string', 'å…¬å¸åç§°'),
('company', 'company_code', '001', 'string', 'å…¬å¸ç¼–ç '),
('company', 'tax_number', '91000000000000000X', 'string', 'çº³ç¨äººè¯†åˆ«å·'),
('company', 'legal_person', 'å¼ ä¸‰', 'string', 'æ³•å®šä»£è¡¨äºº'),
('company', 'address', 'åŒ—äº¬å¸‚æœé˜³åŒº', 'string', 'å…¬å¸åœ°å€'),
('company', 'phone', '010-12345678', 'string', 'å…¬å¸ç”µè¯'),
('accounting', 'fiscal_year_start', '01-01', 'string', 'ä¼šè®¡å¹´åº¦å¼€å§‹æ—¥æœŸ'),
('accounting', 'currency_code', 'CNY', 'string', 'æœ¬ä½å¸'),
('accounting', 'decimal_places', '2', 'number', 'é‡‘é¢å°æ•°ä½æ•°'),
('voucher', 'auto_numbering', 'true', 'boolean', 'å‡­è¯è‡ªåŠ¨ç¼–å·'),
('voucher', 'check_balance', 'true', 'boolean', 'å‡­è¯å€Ÿè´·å¹³è¡¡æ£€æŸ¥'),
('system', 'backup_retention_days', '30', 'number', 'å¤‡ä»½ä¿ç•™å¤©æ•°'),
('system', 'log_retention_days', '90', 'number', 'æ—¥å¿—ä¿ç•™å¤©æ•°');

-- 3. åˆå§‹åŒ–ç°é‡‘é“¶è¡Œè´¦æˆ·
INSERT INTO cash_bank_accounts (account_code, account_name, account_type, current_balance) VALUES
('CASH01', 'åº“å­˜ç°é‡‘-äººæ°‘å¸', 'ç°é‡‘', 0),
('BANK01', 'ä¸­å›½é“¶è¡Œ-åŸºæœ¬æˆ·', 'é“¶è¡Œå­˜æ¬¾', 0),
('BANK02', 'å·¥å•†é“¶è¡Œ-ä¸€èˆ¬æˆ·', 'é“¶è¡Œå­˜æ¬¾', 0);

-- 4. åˆå§‹åŒ–éƒ¨é—¨æ•°æ®
INSERT INTO departments (dept_code, dept_name, dept_type, level) VALUES
('001', 'æ€»ç»ç†åŠå…¬å®¤', 'éƒ¨é—¨', 1),
('002', 'è´¢åŠ¡éƒ¨', 'éƒ¨é—¨', 1),
('003', 'é”€å”®éƒ¨', 'éƒ¨é—¨', 1),
('004', 'é‡‡è´­éƒ¨', 'éƒ¨é—¨', 1),
('005', 'äººäº‹éƒ¨', 'éƒ¨é—¨', 1);

-- 5. åˆå§‹åŒ–æŠ¥è¡¨æ¨¡æ¿
INSERT INTO report_templates (template_code, template_name, report_type, template_config, is_default, is_system) VALUES
('BS001', 'èµ„äº§è´Ÿå€ºè¡¨', 'balance_sheet', '{}', TRUE, TRUE),
('IS001', 'åˆ©æ¶¦è¡¨', 'income_statement', '{}', TRUE, TRUE),
('CF001', 'ç°é‡‘æµé‡è¡¨', 'cash_flow', '{}', TRUE, TRUE);
```

---

## ğŸ” ç´¢å¼•ä¼˜åŒ–ç­–ç•¥

### å…³é”®ä¸šåŠ¡ç´¢å¼•
```sql
-- å‡­è¯æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_voucher_date_status ON vouchers(voucher_date, status);
CREATE INDEX idx_voucher_period_type ON vouchers(fiscal_period, voucher_type);
CREATE INDEX idx_entry_account_date ON voucher_entries(account_code, voucher_date);

-- å¾€æ¥è´¦æ¬¾ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_sales_customer_status ON sales_invoices(customer_id, status);
CREATE INDEX idx_purchase_supplier_status ON purchase_invoices(supplier_id, status);
CREATE INDEX idx_receivable_due_status ON sales_invoices(due_date, status);
CREATE INDEX idx_payable_due_status ON purchase_invoices(due_date, status);

-- ç°é‡‘ç®¡ç†ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_cash_account_date ON cash_journal(account_id, journal_date);
CREATE INDEX idx_bank_reconcile_account_date ON bank_reconciliation(account_id, reconcile_date);

-- æ—¥å¿—æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_system_log_user_time ON system_logs(user_id, created_at);
CREATE INDEX idx_audit_table_time ON audit_trails(table_name, created_at);
CREATE INDEX idx_login_user_time ON login_logs(username, login_time);

-- å¤åˆä¸šåŠ¡ç´¢å¼•
CREATE INDEX idx_ledger_account_period ON general_ledger(account_code, fiscal_year, fiscal_period);
CREATE INDEX idx_detail_account_date ON detail_ledger(account_code, voucher_date);
```

---

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

### æ•°æ®åº“è¡¨ç»Ÿè®¡
- **åŸºç¡€è®¾ç½®æ¨¡å—**: 12ä¸ªè¡¨
- **ä¼šè®¡æ ¸ç®—æ¨¡å—**: 11ä¸ªè¡¨  
- **ç°é‡‘ç®¡ç†æ¨¡å—**: 6ä¸ªè¡¨
- **å¾€æ¥è´¦æ¬¾æ¨¡å—**: 12ä¸ªè¡¨
- **è´¢åŠ¡æŠ¥è¡¨æ¨¡å—**: 3ä¸ªè¡¨
- **ç³»ç»Ÿæ—¥å¿—æ¨¡å—**: 4ä¸ªè¡¨

**æ€»è®¡**: 48ä¸ªæ ¸å¿ƒä¸šåŠ¡è¡¨

### åŠŸèƒ½è¦†ç›–ç‡
- âœ… ç”¨æˆ·æƒé™ç®¡ç†: 100%
- âœ… ç»„ç»‡æ¶æ„ç®¡ç†: 100%
- âœ… ç§‘ç›®æœŸåˆç®¡ç†: 100%
- âœ… å‡­è¯å…¨æµç¨‹: 100%
- âœ… ç°é‡‘é“¶è¡Œç®¡ç†: 100%
- âœ… å¾€æ¥è´¦æ¬¾ç®¡ç†: 100%
- âœ… è´¢åŠ¡æŠ¥è¡¨: 100%
- âœ… ç³»ç»Ÿæ—¥å¿—å®¡è®¡: 100%

---

## ğŸ”’ æ•°æ®å®‰å…¨ä¸å®Œæ•´æ€§

### å¤–é”®çº¦æŸ
- æ‰€æœ‰å…³è”å…³ç³»éƒ½è®¾ç½®äº†å¤–é”®çº¦æŸ
- é‡è¦ä¸šåŠ¡æ•°æ®è®¾ç½®çº§è”åˆ é™¤ä¿æŠ¤
- å…³é”®å­—æ®µè®¾ç½®å”¯ä¸€æ€§çº¦æŸ

### å®¡è®¡è·Ÿè¸ª
- æ‰€æœ‰ä¸šåŠ¡è¡¨åŒ…å«å®Œæ•´å®¡è®¡å­—æ®µ
- ç³»ç»Ÿæ“ä½œæ—¥å¿—è®°å½•æ‰€æœ‰ç”¨æˆ·è¡Œä¸º
- æ•°æ®å˜æ›´å®¡è®¡è®°å½•æ‰€æœ‰å…³é”®æ•°æ®ä¿®æ”¹

### æ•°æ®å¤‡ä»½
- å¤‡ä»½è®°å½•è¡¨è¿½è¸ªæ‰€æœ‰å¤‡ä»½æ“ä½œ
- æ”¯æŒå¤šç§å¤‡ä»½ç±»å‹å’Œæ¨¡å¼
- å®Œæ•´çš„å¤‡ä»½çŠ¶æ€ç›‘æ§

---

**è®¾è®¡å®Œæˆæ—¶é—´**: 2025-08-20  
**é€‚ç”¨ç³»ç»Ÿ**: å†…éƒ¨è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ  
**æ•°æ®åº“ç‰ˆæœ¬**: MySQL 8.0+  
**å­—ç¬¦é›†**: UTF8MB4